<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Bazytrack Streaming</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body {
        margin: 0;
        font-family: Tahoma, Arial;
        background: #f4f4f4;
    }
    header {
        background: #0162b1;
        color: white;
        padding: 15px;
        font-size: 22px;
        font-weight: bold;
    }
    .container {
        display: flex;
        padding: 15px;
        gap: 15px;
    }
    .sidebar {
        width: 260px;
        background: #fff;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 0 8px #ccc;
    }
    .content {
        flex: 1;
        background: #fff;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 0 8px #ccc;
    }
    .filter-title {
        font-size: 18px;
        margin-bottom: 10px;
        font-weight: bold;
    }
    #fileList li {
        padding: 5px;
        margin-bottom: 5px;
        background: #eee;
        border-radius: 5px;
        cursor: pointer;
    }
    #playerBox {
        background: #000;
        border-radius: 8px;
        overflow: hidden;
        width: 100%;
        height: 350px;
        margin-top: 15px;
    }
    #player {
        width: 100%;
        height: 100%;
        background: #000;
    }
</style>
</head>

<body>

<header>
    Ù…Ù†ØµØ© Bazytrack â€” Ø§Ù„Ù…Ù„ÙØ§Øª + Ø§Ù„ÙÙ„Ø§ØªØ± + Ø§Ù„Ø¨Ø«
</header>

<div class="container">

    <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ -->
    <div class="sidebar">
        
        <div class="filter-title">ğŸ“¤ ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù</div>
        <input type="file" id="upload" style="width:100%">
        <br><br>

        <div class="filter-title">ğŸ” ÙÙ„ØªØ± Ø§Ù„Ù…Ù„ÙØ§Øª</div>
        <input type="text" id="search" placeholder="Ø§Ø¨Ø­Ø«..." style="width:100%; padding:6px;">
        <br><br>

        <div class="filter-title">ğŸ“ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„ÙØ§Øª</div>
        <ul id="fileList"></ul>

    </div>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
    <div class="content">
        <h3>ğŸ¥ Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø± / ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</h3>
        <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ù…Ù„Ù Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„ÙŠØªÙ… Ø¹Ø±Ø¶Ù‡ Ù‡Ù†Ø§â€¦</p>

        <div id="playerBox">
            <video id="player" controls autoplay playsinline></video>
        </div>
    </div>

</div>

<!-- flv.js -->
<script src="https://cdn.jsdelivr.net/npm/flv.js@latest/dist/flv.min.js"></script>

<script>

// ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ù„ÙØ§Øª Ù…Ø­Ù„ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©
let savedFiles = [];

// Ø¹Ù†Ø¯ Ø±ÙØ¹ Ù…Ù„Ù
document.getElementById("upload").addEventListener("change", function(e) {
    const file = e.target.files[0];
    if (!file) return;

    savedFiles.push(file);
    renderFileList();
});

// ÙÙ„ØªØ±Ø© Ø§Ù„Ù…Ù„ÙØ§Øª
document.getElementById("search").addEventListener("input", function() {
    renderFileList();
});

// Ø¹Ø±Ø¶ Ù…Ù„ÙØ§Øª Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
function renderFileList() {
    const list = document.getElementById("fileList");
    const filter = document.getElementById("search").value.toLowerCase();

    list.innerHTML = "";
    savedFiles
        .filter(f => f.name.toLowerCase().includes(filter))
        .forEach(file => {
            let li = document.createElement("li");
            li.textContent = file.name;
            li.onclick = () => loadVideoFile(file);
            list.appendChild(li);
        });
}

// ØªØ­Ù…ÙŠÙ„ ÙˆØªØ´ØºÙŠÙ„ Ù…Ù„Ù ÙÙŠØ¯ÙŠÙˆ
function loadVideoFile(file) {
    const url = URL.createObjectURL(file);
    playVideo(url);
}

// ØªØ´ØºÙŠÙ„ FLV / HLS ØªÙ„Ù‚Ø§Ø¦ÙŠ
function playVideo(url) {
    const video = document.getElementById("player");

    if (url.endsWith(".flv") && flvjs.isSupported()) {
        const flvPlayer = flvjs.createPlayer({
            type: "flv",
            url: url
        });
        flvPlayer.attachMediaElement(video);
        flvPlayer.load();
        flvPlayer.play();
    } else {
        video.src = url;
        video.play();
    }
}

</script>

</body>
</html>
