async function playWithWait(imei, mode, meta){

    setStatus("ØªØ­Ø¶ÙŠØ± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ...");
    showLoading(true, "Ø¬Ø§Ø±ÙŠ Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ...");

    // RESET ÙƒØ§Ù…Ù„
    await resetPlayback();

    const flvUrl = `https://${STREAM_HOST}/live/0/${imei}.flv?_=${Date.now()}`;
    const hlsUrl = `https://${STREAM_HOST}/live/0/${imei}.m3u8?_=${Date.now()}`;

    const isHls = isIOS || isSafari;

    // ðŸ¤šðŸ”¥ Ø£Ù‡Ù… Ø®Ø·ÙˆØ©: Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± 1 Ø«Ø§Ù†ÙŠØ© Ø­ØªÙ‰ ÙŠØ¨Ø¯Ø£ stream ÙØ¹Ù„ÙŠØ§Ù‹
    await new Promise(res => setTimeout(res, 1000));

    // HLS
    if (isHls){
        videoPlayer.src = hlsUrl;
        videoPlayer.play().catch(()=>{});
        showLoading(false);
        return;
    }

    // FLV
    if (flvjs.isSupported()){

        flvPlayer = flvjs.createPlayer({
            type: 'flv',
            url : flvUrl,
            isLive: false,
            enableStashBuffer: false,
            autoCleanupSourceBuffer: true
        });

        flvPlayer.attachMediaElement(videoPlayer);

        // Ø¹Ù†Ø¯ ÙˆØµÙˆÙ„ metadata = stream Ø¬Ø§Ù‡Ø²
        flvPlayer.on(flvjs.Events.METADATA_ARRIVED, () => {
            console.log("Metadata Arrived â†’ Start Video");
            showLoading(false);
            videoPlayer.play().catch(()=>{});
        });

        flvPlayer.on(flvjs.Events.ERROR, (type, detail) => {
            console.warn("FLV ERROR:", type, detail);
        });

        flvPlayer.load();
    }
}
